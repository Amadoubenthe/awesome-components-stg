<mat-card [formGroup]="mainForm" class="main-form">
  <mat-card-title>Inscription</mat-card-title>
  <mat-card class="form-card" [formGroup]="personalInfoForm">
    <mat-card-subtitle>Informationss personnelles</mat-card-subtitle>
    <div class="form-row">
      <mat-form-field>
        <mat-label>Nom</mat-label>
        <input
          matInput
          type="text"
          formControlName="lastName"
          placeholder="Nom"
        />
        <mat-error>Ce champ est requis</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Prénom</mat-label>
        <input
          matInput
          type="text"
          formControlName="firstName"
          placeholder="Prénom"
        />
        <mat-error>Ce champ est requis</mat-error>
      </mat-form-field>
    </div>
  </mat-card>
  <mat-card class="form-card">
    <mat-card-subtitle
      >Comment préférez-vous que l'on vous contacte ?</mat-card-subtitle
    >
    <mat-radio-group [formControl]="contactPreferenceCtrl">
      <mat-radio-button value="email">Mail</mat-radio-button>
      <mat-radio-button value="phone">Téléphone</mat-radio-button>
    </mat-radio-group>
  </mat-card>
  <mat-card class="form-card" [formGroup]="emailForm">
    <mat-card-subtitle *ngIf="showEmailCtrl$ | async">Email</mat-card-subtitle>
    <mat-card-subtitle *ngIf="showPhoneCtrl$ | async">Phone</mat-card-subtitle>
    <div class="form-row" *ngIf="showEmailCtrl$ | async">
      <mat-form-field>
        <mat-label>Adresse mail</mat-label>
        <input
          matInput
          type="email"
          formControlName="email"
          placeholder="Adresse mail"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Confirmez votre adresse mail</mat-label>
        <input
          matInput
          type="email"
          formControlName="confirm"
          placeholder="Confirmez votre adresse mail"
        />
        <mat-error>{{ getFormControlErrorText(emailCtrl) }}</mat-error>
      </mat-form-field>
    </div>
    <mat-form-field *ngIf="showPhoneCtrl$ | async">
      <mat-label>Téléphone</mat-label>
      <input
        matInput
        type="text"
        [formControl]="phoneCtrl"
        placeholder="Téléphone"
      />
    </mat-form-field>
  </mat-card>
  <mat-card class="form-card" [formGroup]="loginInfoForm">
    <mat-card-subtitle>Informations de connexion</mat-card-subtitle>
    <mat-form-field>
      <mat-label>Username</mat-label>
      <input matInput formControlName="username" placeholder="Username" />
      <mat-error></mat-error>
    </mat-form-field>
    <div class="form-row">
      <mat-form-field>
        <mat-label>Mot de passe</mat-label>
        <input
          matInput
          type="password"
          formControlName="password"
          placeholder="Mot de passe"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Confirmez votre mot de passe</mat-label>
        <input
          matInput
          type="password"
          formControlName="confirmPassword"
          placeholder="Confirmez votre mot de passe"
        />
      </mat-form-field>
    </div>
  </mat-card>
  <mat-card-actions *ngIf="mainForm.valid">
    <button mat-flat-button color="primary" (click)="onSubmit()">
      ENREGISTRER
    </button>
  </mat-card-actions></mat-card
>
